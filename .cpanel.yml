---
deployment:
  tasks:
    - export DEPLOYPATH=/home/marddium/public_html/
    - echo "ğŸš€ Starting deployment to $DEPLOYPATH"
    - echo "ğŸ”§ Resolving any Git conflicts..."
    - git config --global user.email "deploy@mardenseo.com"
    - git config --global user.name "cPanel Deploy Bot"
    - echo "ğŸ”„ Resetting repository to clean state..."
    - git fetch origin
    - git reset --hard origin/main
    - echo "âœ… Repository reset completed"
    - echo "ğŸ“ Listing dist folder contents:"
    - ls -la dist/
    - echo "ğŸ“‹ Current deployment commit:"
    - git log --oneline -1
    - echo "ğŸš€ Copying files from dist/ to $DEPLOYPATH"
    - /bin/cp -R dist/* $DEPLOYPATH/
    - echo "ğŸ” Setting proper permissions..."
    - /bin/find $DEPLOYPATH -type d -exec chmod 755 {} \;
    - /bin/find $DEPLOYPATH -type f -exec chmod 644 {} \;
    - echo "âœ… Verifying critical files deployed:"
    - ls -la $DEPLOYPATH/index.html
    - ls -la $DEPLOYPATH/sitemap.xml
    - ls -la $DEPLOYPATH/robots.txt
    - ls -la $DEPLOYPATH/.htaccess
    - echo "ğŸ‰ Deployment completed successfully!"
    - echo "ğŸŒ Website should be live at https://mardenseo.com"